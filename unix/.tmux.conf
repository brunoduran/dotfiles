# Prefix key
unbind C-b  
set -g prefix  C-q 
set -g prefix2 C-Space

# Basics

unbind-key h
unbind-key j
unbind-key k
unbind-key l
unbind-key s
unbind-key v
unbind-key Up
unbind-key Down
unbind-key Left
unbind-key Right

bind-key j select-pane -D 
bind-key k select-pane -U
bind-key h select-pane -L
bind-key l select-pane -R
bind-key s split-window -v -c "#{pane_current_path}"
bind-key v split-window -h -c "#{pane_current_path}"

bind-key Down resize-pane -D 
bind-key Up resize-pane -U
bind-key Left resize-pane -L
bind-key Right resize-pane -R

# Zoom in, zoom out

unbind-key z
unbind-key f

bind-key z detach
bind-key f resize-pane -Z


# Default is login shells that are slower for some reason.
# If you are on a MacOS, login shell are the default, so I left them there so I do not mess up
# https://apple.stackexchange.com/questions/12993/why-doesnt-bashrc-run-automatically
if-shell 'test $(uname) != "Darwin"' 'set -g default-command "$SHELL"'

# Open in current path
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# No beeps, no blinks
set-option -g bell-action none
# Dijkstra was wrong
set -g base-index 1
set -g pane-base-index 1
set -g escape-time 0
set -g mouse on


# copy-mode in vim mode? Why not just vim? FIXME: This is actually quite insecure + change -S to - in v 2.0 + $EDITOR not vim, and this does not work
#bind-key v capture-pane -S -32768\; save-buffer /tmp/tmux_buffer.txt\; delete-buffer\; send-keys c-a c-k ' vim -c "+normal G{}0" /tmp/tmux_buffer.txt; rm /tmp/tmux_buffer.txt' c-m \;
#bind-key v capture-pane -S -32768\; save-buffer "$TMPDIR/tmux_pane.#{pane_id}"\; delete-buffer\; send-keys c-a c-k ' vim -c "+normal G{}0" "$TMPDIR/tmux_pane.#{pane_id}"; rm "$TMPDIR/tmux_pane.#{pane_id}"' c-m \;

#bind-key v capture-pane -S -32768\; run " tmux save-buffer - > $TMPDIR/tmux_pane.#{pane_id}"\; delete-buffer\; send-keys c-a c-k ' vim -c "+normal G{}0" "$TMPDIR/tmux_pane.#{pane_id}"; rm "$TMPDIR/tmux_pane.#{pane_id}"' c-m \;

#unbind-key [
# VI copy mode
#setw -g mode-keys vi
#bind-key -T copy-mode-vi 'v' send -X begin-selection
#bind-key -T copy-mode-vi 'y' send -X copy-selection-and-cancel


# Theme
#-------------------------------------------------------------------------------

# Status update interval
set -g status-interval 1

# Basic status bar colors
set -g status-bg black
set -g status-fg cyan

# Left side of status bar
set -g status-left-bg black
set -g status-left-fg green
set -g status-left-length 40
set -g status-left "#S #[fg=white]» #[fg=yellow]#I #[fg=cyan]#P"

# Right side of status bar
set -g status-right-bg black
set -g status-right-fg cyan
set -g status-right-length 40
set -g status-right "#H #[fg=white]« #[fg=yellow]%H:%M:%S #[fg=green]%d-%b-%y"

# Window status
set -g window-status-format " #I:#W#F "
set -g window-status-current-format " #I:#W#F "

# Current window status
set -g window-status-current-bg red
set -g window-status-current-fg black

# Window with activity status
set -g window-status-activity-bg yellow # fg and bg are flipped here due to a
set -g window-status-activity-fg black  # bug in tmux

# Window separator
set -g window-status-separator ""

# Window status alignment
set -g status-justify centre

# Pane border
set -g pane-border-bg default
set -g pane-border-fg default

# Active pane border
set -g pane-active-border-bg default
set -g pane-active-border-fg green

# Pane number indicator
set -g display-panes-colour default
set -g display-panes-active-colour default

# Clock mode
set -g clock-mode-colour red
set -g clock-mode-style 24

# Message
set -g message-bg default
set -g message-fg default

# Command message
set -g message-command-bg default
set -g message-command-fg default

# Mode
set -g mode-bg red
set -g mode-fg default
